# 📘 Day 2: 노트 생성 기능 구현

오늘은 `create_note.sh` 스크립트를 작성하여 CLI에서 노트를 생성할 수 있는 기능을 구현했다.  
주요 목표는 **제목을 인자로 받고, 타임스탬프가 포함된 파일명으로 노트를 생성한 뒤, 사용자 입력을 저장하는 것**이었다.

---

## ✅ 1. 스크립트 전체 코드

```bash
#!/bin/bash

# 📌 노트가 저장될 디렉토리 경로 설정
# → 현재 파일(create_note.sh)의 위치를 기준으로 상위 폴더(notes/)로 이동
NOTES_DIR="$(dirname "$0")/../notes"
mkdir -p "$NOTES_DIR"     # 📁 해당 디렉토리가 없다면 새로 만든다

# 📌 입력 인자 확인
if [ -z "$1" ]; then       # ⚠️ 인자가 비어 있다면
  echo "사용법: ./scripts/create_note.sh \"노트 제목\""
  exit 1                   # → 스크립트를 종료
fi

# 📌 변수 설정
TITLE="$1"                                              # 📝 첫 번째 인자를 제목으로 저장
TIMESTAMP=$(date +"%Y%m%d_%H%M%S")                      # ⏰ 현재 시간을 YYYYMMDD_HHMMSS 형식으로 저장
FILENAME="${TIMESTAMP}_${TITLE// /_}.md"                # 📄 공백은 _로 치환하여 파일명 생성
FILEPATH="$NOTES_DIR/$FILENAME"                         # 📍 전체 파일 경로 설정

# 📌 노트 내용 입력 받기
echo "📝 노트 내용을 입력하세요. (Ctrl+D로 종료)"
cat > "$FILEPATH"                                       # 🧾 사용자가 입력한 내용을 파일로 저장

# 📌 완료 메시지 출력
echo "✅ 노트가 저장되었습니다: $FILEPATH"
```

---

## ✅ 2. 주요 개념 정리

### 🗂️ 상대경로 vs 절대경로

| 구분 | 예시 | 설명 |
|------|------|------|
| 상대경로 | `./notes` | 현재 작업 디렉토리를 기준으로 경로를 해석 |
| 절대경로 | `$(dirname "$0")/../notes` | 스크립트 파일이 있는 위치를 기준으로 경로를 계산 |

- `$(dirname "$0")`는 현재 스크립트(`create_note.sh`)가 있는 디렉토리 경로를 반환
- `../notes`는 그 상위 디렉토리의 `notes/`를 의미
- 이렇게 하면 스크립트를 **어디서 실행하든 항상 루트의 notes/에 저장**됨

### 🔐 실행 권한 부여

```bash
chmod +x scripts/create_note.sh
```
- `.sh` 파일은 단순 텍스트이므로 실행을 위해 위와 같은 권한 부여가 필요하다.

### 🚀 실행 방법

```bash
./scripts/create_note.sh "테스트 노트"
```

- 인자로 `"노트 제목"`을 넘기면, `notes/` 폴더에 자동으로 타임스탬프와 함께 저장된다.
- 입력은 CLI에서 직접 받고, 종료는 `Ctrl+D`로 한다.

---

## 🧪 테스트 결과

- `notes/` 디렉토리에 `20250619_테스트_노트.md`와 같은 파일이 정상 생성되었으며,
- 입력한 본문 내용도 잘 저장되었음을 `cat` 명령어로 확인했다.
- 중간에 `$TIMESTAMP` 누락이나 상대경로로 인해 `scripts/notes/`에 잘못된 파일이 생성될 수 있으므로 주의가 필요했다.
